function updateViewportDimensions(){var e=window,i=document,t=i.documentElement,o=i.getElementsByTagName("body")[0];return{width:e.innerWidth||t.clientWidth||o.clientWidth,height:e.innerHeight||t.clientHeight||o.clientHeight}}function loadGravatars(){viewport=updateViewportDimensions(),viewport.width>=768&&jQuery(".comment img[data-gravatar]").each(function(){jQuery(this).attr("src",jQuery(this).attr("data-gravatar"))})}var cssua=function(e,i,t){var o=/\s*([\-\w ]+)[\s\/\:]([\d_]+\b(?:[\-\._\/]\w+)*)/,n=/([\w\-\.]+[\s\/][v]?[\d_]+\b(?:[\-\._\/]\w+)*)/g,r=/\b(?:(blackberry\w*|bb10)|(rim tablet os))(?:\/(\d+\.\d+(?:\.\w+)*))?/,s=/\bsilk-accelerated=true\b/,l=/\bfluidapp\b/,a=/(\bwindows\b|\bmacintosh\b|\blinux\b|\bunix\b)/,d=/(\bandroid\b|\bipad\b|\bipod\b|\bwindows phone\b|\bwpdesktop\b|\bxblwp7\b|\bzunewp7\b|\bwindows ce\b|\bblackberry\w*|\bbb10\b|\brim tablet os\b|\bmeego|\bwebos\b|\bpalm|\bsymbian|\bj2me\b|\bdocomo\b|\bpda\b|\bchtml\b|\bmidp\b|\bcldc\b|\w*?mobile\w*?|\w*?phone\w*?)/,c=/(\bxbox\b|\bplaystation\b|\bnintendo\s+\w+)/,p={parse:function(e,i){var t={};if(i&&(t.standalone=i),!(e=(""+e).toLowerCase()))return t;for(var n,p,u=e.split(/[()]/),f=0,h=u.length;f<h;f++)if(f%2){var x=u[f].split(";");for(n=0,p=x.length;n<p;n++)if(o.exec(x[n])){var m=RegExp.$1.split(" ").join("_"),b=RegExp.$2;(!t[m]||parseFloat(t[m])<parseFloat(b))&&(t[m]=b)}}else if(x=u[f].match(/([\w\-\.]+[\s\/][v]?[\d_]+\b(?:[\-\._\/]\w+)*)/g))for(n=0,p=x.length;n<p;n++)m=x[n].split(/[\/\s]+/),m.length&&"mozilla"!==m[0]&&(t[m[0].split(" ").join("_")]=m.slice(1).join("-"));return d.exec(e)?(t.mobile=RegExp.$1,r.exec(e)&&(delete t[t.mobile],t.blackberry=t.version||RegExp.$3||RegExp.$2||RegExp.$1,RegExp.$1?t.mobile="blackberry":"0.0.1"===t.version&&(t.blackberry="7.1.0.0"))):a.exec(e)?t.desktop=RegExp.$1:c.exec(e)&&(t.game=RegExp.$1,n=t.game.split(" ").join("_"),t.version&&!t[n]&&(t[n]=t.version)),t.intel_mac_os_x?(t.mac_os_x=t.intel_mac_os_x.split("_").join("."),delete t.intel_mac_os_x):t.cpu_iphone_os?(t.ios=t.cpu_iphone_os.split("_").join("."),delete t.cpu_iphone_os):t.cpu_os?(t.ios=t.cpu_os.split("_").join("."),delete t.cpu_os):"iphone"!==t.mobile||t.ios||(t.ios="1"),t.opera&&t.version?(t.opera=t.version,delete t.blackberry):s.exec(e)?t.silk_accelerated=!0:l.exec(e)&&(t.fluidapp=t.version),t.applewebkit?(t.webkit=t.applewebkit,delete t.applewebkit,t.opr&&(t.opera=t.opr,delete t.opr,delete t.chrome),t.safari&&(t.chrome||t.crios||t.opera||t.silk||t.fluidapp||t.phantomjs||t.mobile&&!t.ios?delete t.safari:t.safari=t.version&&!t.rim_tablet_os?t.version:{419:"2.0.4",417:"2.0.3",416:"2.0.2",412:"2.0",312:"1.3",125:"1.2",85:"1.0"}[parseInt(t.safari,10)]||t.safari)):t.msie||t.trident?(t.opera||(t.ie=t.msie||t.rv),delete t.msie,t.windows_phone_os?(t.windows_phone=t.windows_phone_os,delete t.windows_phone_os):"wpdesktop"!==t.mobile&&"xblwp7"!==t.mobile&&"zunewp7"!==t.mobile||(t.mobile="windows desktop",t.windows_phone=9>+t.ie?"7.0":10>+t.ie?"7.5":"8.0",delete t.windows_nt)):(t.gecko||t.firefox)&&(t.gecko=t.rv),t.rv&&delete t.rv,t.version&&delete t.version,t},format:function(e){var i="",t;for(t in e)if(t&&e.hasOwnProperty(t)){var o=t,n=e[t],o=o.split(".").join("-"),r=" ua-"+o;if("string"==typeof n){for(var n=n.split(" ").join("_").split(".").join("-"),s=n.indexOf("-");0<s;)r+=" ua-"+o+"-"+n.substring(0,s),s=n.indexOf("-",s+1);r+=" ua-"+o+"-"+n}i+=r}return i},encode:function(e){var i="",t;for(t in e)t&&e.hasOwnProperty(t)&&(i&&(i+="&"),i+=encodeURIComponent(t)+"="+encodeURIComponent(e[t]));return i}};return p.userAgent=p.ua=p.parse(i,t),i=p.format(p.ua)+" js",e.className=e.className?e.className.replace(/\bno-js\b/g,"")+i:i.substr(1),p}(document.documentElement,navigator.userAgent,navigator.standalone);!function(e){e.isScrollToFixed=function(i){return!!e(i).data("ScrollToFixed")},e.ScrollToFixed=function(i,t){function o(){g.trigger("preUnfixed.ScrollToFixed"),c(),g.trigger("unfixed.ScrollToFixed"),A=-1,S=g.offset().top,y=g.offset().left,m.options.offsets&&(y+=g.offset().left-g.position().left),-1==k&&(k=y),w=g.css("position"),b=!0,-1!=m.options.bottom&&(g.trigger("preFixed.ScrollToFixed"),a(),g.trigger("fixed.ScrollToFixed"))}function n(){var e=m.options.limit;return e?"function"==typeof e?e.apply(g):e:0}function r(){return"fixed"===w}function s(){return"absolute"===w}function l(){return!(r()||s())}function a(){if(!r()){var e=g[0].getBoundingClientRect();j.css({display:g.css("display"),width:e.width,height:e.height,float:g.css("float")}),cssOptions={"z-index":m.options.zIndex,position:"fixed",top:-1==m.options.bottom?u():"",bottom:-1==m.options.bottom?"":m.options.bottom,"margin-left":"0px"},m.options.dontSetWidth||(cssOptions.width=g.css("width")),g.css(cssOptions),g.addClass(m.options.baseClassName),m.options.className&&g.addClass(m.options.className),w="fixed"}}function d(){var e=n(),i=y;m.options.removeOffsets&&(i="",e-=S),cssOptions={position:"absolute",top:e,left:i,"margin-left":"0px",bottom:""},m.options.dontSetWidth||(cssOptions.width=g.css("width")),g.css(cssOptions),w="absolute"}function c(){l()||(A=-1,j.css("display","none"),g.css({"z-index":F,width:"",position:v,left:"",top:T,"margin-left":""}),g.removeClass("scroll-to-fixed-fixed"),m.options.className&&g.removeClass(m.options.className),w=null)}function p(e){e!=A&&(g.css("left",y-e),A=e)}function u(){var e=m.options.marginTop;return e?"function"==typeof e?e.apply(g):e:0}function f(){if(e.isScrollToFixed(g)&&!g.is(":hidden")){var i=b,t=l();b?l()&&(S=g.offset().top,y=g.offset().left):o();var f=e(window).scrollLeft(),w=e(window).scrollTop(),_=n();m.options.minWidth&&e(window).width()<m.options.minWidth?l()&&i||(x(),g.trigger("preUnfixed.ScrollToFixed"),c(),g.trigger("unfixed.ScrollToFixed")):m.options.maxWidth&&e(window).width()>m.options.maxWidth?l()&&i||(x(),g.trigger("preUnfixed.ScrollToFixed"),c(),g.trigger("unfixed.ScrollToFixed")):-1==m.options.bottom?_>0&&w>=_-u()?t||s()&&i||(x(),g.trigger("preAbsolute.ScrollToFixed"),d(),g.trigger("unfixed.ScrollToFixed")):w>=S-u()?(r()&&i||(x(),g.trigger("preFixed.ScrollToFixed"),a(),A=-1,g.trigger("fixed.ScrollToFixed")),p(f)):l()&&i||(x(),g.trigger("preUnfixed.ScrollToFixed"),c(),g.trigger("unfixed.ScrollToFixed")):_>0?w+e(window).height()-g.outerHeight(!0)>=_-(u()||-h())?r()&&(x(),g.trigger("preUnfixed.ScrollToFixed"),"absolute"===v?d():c(),g.trigger("unfixed.ScrollToFixed")):(r()||(x(),g.trigger("preFixed.ScrollToFixed"),a()),p(f),g.trigger("fixed.ScrollToFixed")):p(f)}}function h(){return m.options.bottom?m.options.bottom:0}function x(){var e=g.css("position");"absolute"==e?g.trigger("postAbsolute.ScrollToFixed"):"fixed"==e?g.trigger("postFixed.ScrollToFixed"):g.trigger("postUnfixed.ScrollToFixed")}var m=this;m.$el=e(i),m.el=i,m.$el.data("ScrollToFixed",m);var b=!1,g=m.$el,w,v,_,T,F,S=0,y=0,k=-1,A=-1,j=null,R,C,E=function(e){g.is(":visible")&&(b=!1,f())},U=function(e){window.requestAnimationFrame?requestAnimationFrame(f):f()},z=function(){var e=document.body;if(document.createElement&&e&&e.appendChild&&e.removeChild){var i=document.createElement("div");if(!i.getBoundingClientRect)return null;i.innerHTML="x",i.style.cssText="position:fixed;top:100px;",e.appendChild(i);var t=e.style.height,o=e.scrollTop;e.style.height="3000px",e.scrollTop=500;var n=i.getBoundingClientRect().top;e.style.height=t;var r=100===n;return e.removeChild(i),e.scrollTop=o,r}return null},O=function(e){e=e||window.event,e.preventDefault&&e.preventDefault(),e.returnValue=!1};m.init=function(){m.options=e.extend({},e.ScrollToFixed.defaultOptions,t),F=g.css("z-index"),m.$el.css("z-index",m.options.zIndex),j=e("<div />"),w=g.css("position"),v=g.css("position"),_=g.css("float"),T=g.css("top"),l()&&m.$el.after(j),e(window).bind("resize.ScrollToFixed",E),e(window).bind("scroll.ScrollToFixed",U),"ontouchmove"in window&&e(window).bind("touchmove.ScrollToFixed",f),m.options.preFixed&&g.bind("preFixed.ScrollToFixed",m.options.preFixed),m.options.postFixed&&g.bind("postFixed.ScrollToFixed",m.options.postFixed),m.options.preUnfixed&&g.bind("preUnfixed.ScrollToFixed",m.options.preUnfixed),m.options.postUnfixed&&g.bind("postUnfixed.ScrollToFixed",m.options.postUnfixed),m.options.preAbsolute&&g.bind("preAbsolute.ScrollToFixed",m.options.preAbsolute),m.options.postAbsolute&&g.bind("postAbsolute.ScrollToFixed",m.options.postAbsolute),m.options.fixed&&g.bind("fixed.ScrollToFixed",m.options.fixed),m.options.unfixed&&g.bind("unfixed.ScrollToFixed",m.options.unfixed),m.options.spacerClass&&j.addClass(m.options.spacerClass),g.bind("resize.ScrollToFixed",function(){j.height(g.height())}),g.bind("scroll.ScrollToFixed",function(){g.trigger("preUnfixed.ScrollToFixed"),c(),g.trigger("unfixed.ScrollToFixed"),f()}),g.bind("detach.ScrollToFixed",function(i){O(i),g.trigger("preUnfixed.ScrollToFixed"),c(),g.trigger("unfixed.ScrollToFixed"),e(window).unbind("resize.ScrollToFixed",E),e(window).unbind("scroll.ScrollToFixed",U),g.unbind(".ScrollToFixed"),j.remove(),m.$el.removeData("ScrollToFixed")}),E()},m.init()},e.ScrollToFixed.defaultOptions={marginTop:0,limit:0,bottom:-1,zIndex:1e3,baseClassName:"scroll-to-fixed-fixed"},e.fn.scrollToFixed=function(i){return this.each(function(){new e.ScrollToFixed(this,i)})}}(jQuery),function(){function e(){}function i(e){return r.retinaImageSuffix+e}function t(e,t){if(this.path=e||"",void 0!==t&&null!==t)this.at_2x_path=t,this.perform_check=!1;else{if(void 0!==document.createElement){var o=document.createElement("a");o.href=this.path,o.pathname=o.pathname.replace(s,i),this.at_2x_path=o.href}else{var n=this.path.split("?");n[0]=n[0].replace(s,i),this.at_2x_path=n.join("?")}this.perform_check=!0}}function o(e){this.el=e,this.path=new t(this.el.getAttribute("src"),this.el.getAttribute("data-at2x"));var i=this;this.path.check_2x_variant(function(e){e&&i.swap()})}var n="undefined"==typeof exports?window:exports,r={retinaImageSuffix:"@2x",check_mime_type:!0,retinaImgTagSelector:"body img",force_original_dimensions:!0};n.Retina=e,e.configure=function(e){null===e&&(e={});for(var i in e)e.hasOwnProperty(i)&&(r[i]=e[i])},e.init=function(e){null===e&&(e=n),e.addEventListener("load",function(){var e,i,t=document.querySelectorAll(r.retinaImgTagSelector),n=[];for(e=0;e<t.length;e+=1)i=t[e],i.getAttributeNode("data-no-retina")||i.src&&n.push(new o(i))})},e.isRetina=function(){var e="(-webkit-min-device-pixel-ratio: 1.5), (min--moz-device-pixel-ratio: 1.5), (-o-min-device-pixel-ratio: 3/2), (min-resolution: 1.5dppx)";return n.devicePixelRatio>1||!(!n.matchMedia||!n.matchMedia("(-webkit-min-device-pixel-ratio: 1.5), (min--moz-device-pixel-ratio: 1.5), (-o-min-device-pixel-ratio: 3/2), (min-resolution: 1.5dppx)").matches)};var s=/\.[\w\?=]+$/;n.RetinaImagePath=t,t.confirmed_paths=[],t.prototype.is_external=function(){return!(!this.path.match(/^(https?\:|\/\/)/i)||this.path.match("//"+document.domain))},t.prototype.check_2x_variant=function(e){var i,o=this;return this.perform_check||void 0===this.at_2x_path||null===this.at_2x_path?this.at_2x_path in t.confirmed_paths?e(!0):this.is_external()?e(!1):(i=new XMLHttpRequest,i.open("HEAD",this.at_2x_path),i.onreadystatechange=function(){if(4!==i.readyState)return e(!1);if(i.status>=200&&i.status<=399){if(r.check_mime_type){var n=i.getResponseHeader("Content-Type");if(null===n||!n.match(/^image/i))return e(!1)}return t.confirmed_paths.push(o.at_2x_path),e(!0)}return e(!1)},void i.send()):e(!0)},n.RetinaImage=o,o.prototype.swap=function(e){function i(){t.el.complete?(r.force_original_dimensions&&(0===t.el.offsetWidth&&0===t.el.offsetHeight?(t.el.setAttribute("width",t.el.naturalWidth),t.el.setAttribute("height",t.el.naturalHeight)):(t.el.setAttribute("width",t.el.offsetWidth),t.el.setAttribute("height",t.el.offsetHeight))),t.el.setAttribute("src",e)):setTimeout(i,5)}void 0===e&&(e=this.path.at_2x_path);var t=this;i()},e.isRetina()&&e.init(n)}(),function(e,i){e.fn.nearest=function(t){function o(i){r=r?r.add(i):e(i)}var n,r,s,l,a,d=i.querySelectorAll;return this.each(function(){n=this,e.each(t.split(","),function(){if(l=e.trim(this),l.indexOf("#"))for(a=n.parentNode;a;){if(s=d?a.querySelectorAll(l):e(a).find(l),s.length){o(s);break}a=a.parentNode}else o(d?i.querySelectorAll(l):e(l))})}),r||e()}}(jQuery,document),jQuery(document).ready(function($){$('a[href*="#"]:not([href="#"])').click(function(){if(location.pathname.replace(/^\//,"")==this.pathname.replace(/^\//,"")&&location.hostname==this.hostname){var e=$(this.hash);if(e=e.length?e:$("[name="+this.hash.slice(1)+"]"),e.length)return $("html, body").animate({scrollTop:e.offset().top-100},1e3),!1}}),document.location.hash&&setTimeout(function(){window.scrollTo(window.scrollX,window.scrollY-100)},1e3)});var viewport=updateViewportDimensions(),waitForFinalEvent=function(){var e={};return function(i,t,o){o||(o="Don't call this twice without a uniqueId"),e[o]&&clearTimeout(e[o]),e[o]=setTimeout(i,t)}}(),timeToWaitForLast=100;jQuery(document).ready(function($){loadGravatars(),viewport=updateViewportDimensions(),viewport.width>=768&&$("header.header").scrollToFixed()});